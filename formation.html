<!DOCTYPE html>

<html>
    <head>
        <!-- Basic Page Needs
    ================================================== -->
        <meta charset="utf-8">
        <!--[if IE]><meta http-equiv="x-ua-compatible" content="IE=9" /><![endif]-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>AgileTribu - Formateur</title>
        <meta name="description"
              content="AgileTribu est un espace communautaire, d'innovation de services pour améliorer les pratiques Agiles">
        <meta name="keywords" content="AgileTribu, communauté, Agile, Digital, Marketing">
        <meta name="author" content="AgileTribu.com">

        <!-- Favicons
            ================================================== -->
        <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">

        <!-- Bootstrap -->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="fonts/font-awesome/css/font-awesome.css">
        <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.min.js"></script>

        <!-- Nivo Lightbox
            ================================================== -->
        <link rel="stylesheet" href="css/nivo-lightbox.css">
        <link rel="stylesheet" href="css/nivo_lightbox_themes/default/default.css">

        <!-- Slider
            ================================================== -->
        <link href="css/owl.carousel.css" rel="stylesheet" media="screen">
        <link href="css/owl.theme.css" rel="stylesheet" media="screen">

        <!-- Stylesheet
            ================================================== -->
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <link rel="stylesheet" type="text/css" href="css/responsive.css">

        <!-- Google Fonts
            ================================================== -->
        <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>

        <script type="text/javascript" src="js/modernizr.custom.js"></script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-65085367-1', 'auto');
          ga('send', 'pageview');
        </script>

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/vendor/handlebars.js"></script>
        <script src="js/vendor/lodash.core.js"></script>
        <script src="js/vendor/jquery-2.1.1.min.js"></script>
        <script src="js/vendor/prismic.io-1.0.28.min.js"></script>
        <script src="js/prismic-configuration.js"></script>
        <script src="js/prismic-helpers.js"></script>
        <script src="js/prismic-templates.js"></script>
        <script src="js/handlebars-templates.js"></script>
        <script src="js/handlebars-helpers.js"></script>
    </head>
    <body class="loading">
        <header>
            {{> header }}
        </header>

        <!-- Home Section
    ================================================== -->
        <div id="tf-home">
            <div class="overlay overlay-formation">
                <div class="container">
                    <div class="content-heading">
                        <h1>{{[formation.name].value}}</h1>
                        <blockquote>{{[formation.presentation].value}}</blockquote>
                    </div>
                </div>
                <div class="text-center">
                    <a id="contactButton" data-toggle="modal" data-target="#modalContact" href="#" class="btn btn-primary tf-btn actionColor">Je réserve ma place</a>
                </div>
            </div>
        </div>

        <div id="tf-prochaines-formations" class="gray-bg">
            <div class="container">
                <div class="content-heading text-center">
                    <h3><a data-toggle="collapse" href="#collapseProchainesFormations" aria-expanded="true" aria-controls="collapseProchainesFormations"> Prochaines dates de formations <span class="caret"></span></a></h3>
                </div>

                <div class="collapse" id="collapseProchainesFormations">
                        {{#each value}}
                            {{#if @first}}
                                <div class="row">
                            {{else if_mod @index 3 0}}
                                <div class="row">
                            {{/if}}
                            <div class="col-sm-4">
                                <h4 class="text-center"><i class="fa fa fa-calendar"></i> &nbsp;&nbsp; <a href="#">{{date.value}}</a></h4>
                                <p class="text-center">{{formateurs.value}} : <b><a data-toggle="modal" data-target="#modalContact" href="#">je réserve ma place !</a></b></p>
                            </div>
                            {{#if @last}}
                                </div>
                                <br />
                            {{else if_mod @index 3 2}}
                                </div>
                                <br />
                            {{/if}}
                        {{/each}}
                    </div>
                </div>
            </div>
        </div>

        <div id="tf-content">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div id="tf-objectifs">
                            <div class="section-header">
                                <h2><span class="highlight">Objectif</span> de la formation</h2>
                            </div>
                            <blockquote>
                                {{#each value}}
                                    <p>{{this.text}}</p>
                                {{/each}}
                            </blockquote>
                        </div>

                        <div id="tf-moyens">
                            <div class="section-header">
                                <h2>Moyens <span class="highlight">pédagogiques</span></h2>
                            </div>
                            <blockquote>
                                {{#each value}}
                                    <p>{{this.text}}</p>
                                {{/each}}
                            </blockquote>

                        </div>

                        <div id="tf-formateurs">
                            <div class="section-header">
                                <h2><span class="highlight">Formateurs</span></h2>
                            </div>

                            {{#each value}}
                                {{#if @first}}
                                    <div class="row">
                                {{else if_mod @index 3 0}}
                                    <div class="row">
                                {{/if}}
                                <div class="col-sm-4 text-center">
                                    <a href="formateur.html?id={{link.value.document.id}}&slug={{link.value.document.slug}}">
                                        <img src="{{image.value.main.url}}" alt="{{name.value}}" class="img-responsive img-circle img-thumbnail photo-fix-sized">
                                        <br />
                                        {{name.value}}
                                    </a>
                                </div>
                                {{#if @last}}
                                    </div>
                                    <br />
                                {{else if_mod @index 3 2}}
                                    </div>
                                    <br />
                                {{/if}}
                            {{/each}}
                        </div>

                        <div id="tf-pratique">
                            <div class="section-header">
                                <h2>Informations <span class="highlight">pratiques</span></h2>
                            </div>

                            <blockquote>
                                {{#each value}}
                                    <p>{{this.text}}</p>
                                {{/each}}
                            </blockquote>
                        </div>

                        <div class="text-center" id="tf-bottom-buttons">
                            <a data-toggle="modal" data-target="#modalDetail" href="{{this}}" class="btn btn-secondary tf-btn"><i class="fa fa-file-pdf-o"></i>  Détail de la formation</a>
                            <a data-toggle="modal" data-target="#modalContact" href="#" class="btn btn-primary tf-btn actionColor">Je réserve ma place</a>
                        </div>

                        <br /><br />
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal window for contact -->
        <div class="modal fade" id="modalContact" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Contact</h4>
                    </div>

                    <div class="modal-body">
                        <iframe src="{{this}}" height="1000" style="zoom:0.60" width="99.6%" frameborder="0"></iframe>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            {{> footer }}
        </footer>

        <script src="//static.cdn.prismic.io/prismic.js"></script>

        <!-- Logic -->

        <script type="text/javascript">
            $(function() {

                Helpers.withPrismic(function(ctx) {

                    // Retrieve the document
                    var id = Helpers.queryString['id'],
                        slug = Helpers.queryString['slug'];

                    ctx.api.form("everything").ref(ctx.ref).query('[[:d = at(document.id, "' + id + '")]]').submit(function(err, docs) {

                        if (err) { Configuration.onPrismicError(err); return; }

                        var doc = docs.results[0];

                        // If there is no documents for this id
                        if(!doc) {
                            document.location = '404.html';
                        }

                        // If the slug doesn't match
                        if(doc.slug != slug) {
                            // If this is an old valid slug, redirect
                            if(doc.slugs.indexOf(slug) > -1) {
                                document.location = 'detail.html?id=' + doc.id + '&slug=' + doc.slug + '&ref=' + ref;
                            } else {
                                document.location = '404.html';
                            }
                        }

                        // Feed the templates
                        $('header, article, aside, footer').render({
                            doc: doc,
                            ctx: ctx
                        });

                        document.title = "AgileTribu - " + doc.fragments['formation.name'].value;

                        var source_head = $("#tf-home").html();
                        var template_head = Handlebars.compile(source_head);
                        var head_html = template_head(doc.fragments);
                        $("#tf-home").html(head_html);

                        var source_home = $('#tf-home').html();
                        var template_home = Handlebars.compile(source_home);
                        var home_html = template_home(doc.fragments);
                        $('#tf-xp-home').html(home_html);

                        if (typeof doc.fragments['formation.background'] !== 'undefined') {
                            $("#tf-home").css('background', 'url("' +
                                doc.fragments['formation.background'].value.main.url + '")');
                            $("#tf-home").css('background-size', 'cover');
                            $("#tf-home").css('background-position', 'center');
                            $("#tf-home").css('background-attachment', 'fixed');
                            $("#tf-home").css('background-repeat', 'no-repeat');
                        }

                        var source_formations = $('#collapseProchainesFormations').html();
                        var template_formations = Handlebars.compile(source_formations);
                        var formations_html = template_formations(doc.fragments['formation.prochaines_formations']);
                        $('#collapseProchainesFormations').html(formations_html);

                        var source_objectifs = $('#tf-objectifs').html();
                        var template_objectifs = Handlebars.compile(source_objectifs);
                        var objectifs_html = template_objectifs(doc.fragments['formation.objectifs']);
                        $('#tf-objectifs').html(objectifs_html);

                        var source_moyens = $('#tf-moyens').html();
                        var template_moyens = Handlebars.compile(source_moyens);
                        var moyens_html = template_moyens(doc.fragments['formation.moyens']);
                        $('#tf-moyens').html(moyens_html);

                        var source_formateurs = $('#tf-formateurs').html();
                        var template_formateurs = Handlebars.compile(source_formateurs);
                        var formateurs_html = template_formateurs(doc.fragments['formation.formateurs']);
                        $('#tf-formateurs').html(formateurs_html);

                        var source_pratique = $('#tf-pratique').html();
                        var template_pratique = Handlebars.compile(source_pratique);
                        var pratique_html = template_pratique(doc.fragments['formation.infos']);
                        $('#tf-pratique').html(pratique_html);

                        var source_file = $('#tf-bottom-buttons').html();
                        var template_file = Handlebars.compile(source_file);
                        var file_html = template_file(doc.fragments['formation.pdf'].value.file.url);
                        $('#tf-bottom-buttons').html(file_html);

                        var source_contact = $('#modalContact').html();
                        var template_contact = Handlebars.compile(source_contact);
                        var contact_html = template_contact(doc.fragments['formation.contact'].value.url);
                        $('#modalContact').html(contact_html);

                    });

                });

            });

            var header_html = Handlebars.partials['header']();
            $('header').html(header_html);

            var footer_html = Handlebars.partials['footer']();
            $('footer').html(footer_html);
        </script>

    </body>
</html>
